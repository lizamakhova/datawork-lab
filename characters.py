CHARACTERS_PROFILES = {
    "alice": {
        "full_name": "–ê–ª–∏—Å–∞ –ü–µ—Ç—Ä–æ–≤–∞",
        "photo": "üë©‚Äçüíº",
        "status": "üü¢ –û–Ω–ª–∞–π–Ω",
        "role": "–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –∞–Ω–∞–ª–∏—Ç–∏–∫–∏",
        "department": "–û—Ç–¥–µ–ª –∞–Ω–∞–ª–∏—Ç–∏–∫–∏", 
        "work_hours": "9:00-18:00 –ú–°–ö"
    },
    "maxim": {
        "full_name": "–ú–∞–∫—Å–∏–º –í–æ–ª–∫–æ–≤",
        "photo": "üë®‚Äçüíº",
        "status": "üü° –ù–µ –±–µ—Å–ø–æ–∫–æ–∏—Ç—å",
        "role": "–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –¥–∏—Ä–µ–∫—Ç–æ—Ä", 
        "department": "–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –æ—Ç–¥–µ–ª",
        "work_hours": "–ù–µ —É–∫–∞–∑–∞–Ω–æ"
    },
    "kirill": {
        "full_name": "–ö–∏—Ä–∏–ª–ª –°–º–∏—Ä–Ω–æ–≤", 
        "photo": "üë®",
        "status": "üü¢ –û–Ω–ª–∞–π–Ω",
        "role": "Product manager",
        "department": "", 
        "work_hours": "9:00-18:00 –ú–°–ö"
    }
}

# –í get_ai_response:
def get_ai_response(character_key, user_message):
    # –õ–æ–∫–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç ‚Äî —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏!
    from ai_client import OpenAIClient
    client = OpenAIClient()
    return client.generate_response(character_key, user_message)

def get_smart_fallback(character_key, user_message):
    """–£–º–Ω—ã–µ fallback –æ—Ç–≤–µ—Ç—ã –ë–ï–ó —ç–º–æ–¥–∑–∏"""
    message_lower = user_message.lower()
    
    if character_key == "alice":
        if any(word in message_lower for word in ["–º–∞–∫—Å–∏–º", "–∫–∏—Ä–∏–ª–ª", "–ø—Ä–∏—à–µ–ª", "–∑–∞–¥–∞—á"]):
            questions = [
                "–£—Ç–æ—á–Ω—è–ª –ª–∏ —Å—Ä–æ—á–Ω–æ—Å—Ç—å –∑–∞–¥–∞—á–∏?",
                "–ó–∞ –∫–∞–∫–æ–π –ø–µ—Ä–∏–æ–¥ –Ω—É–∂–Ω–æ –ø–æ—Å—á–∏—Ç–∞—Ç—å?",
                "–í —á–µ–º –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å —Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º?",
                "–ö–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ —Ç—Ä–µ–±—É—é—Ç—Å—è –¥–ª—è –∑–∞–¥–∞—á–∏?"
            ]
            return random.choice(questions)
        
        elif any(word in message_lower for word in ["–≤—ã—Ä—É—á–∫", "–¥–æ—Ö–æ–¥"]):
            questions = [
                "–ï—Å—Ç—å —Å–æ–º–Ω–µ–Ω–∏—è –∫–∞–∫ —Å—á–∏—Ç–∞—Ç—å –≤—ã—Ä—É—á–∫—É? –ö–∞–∫–∏–µ –µ—Å—Ç—å –≤–µ—Ä—Å–∏–∏ —Ä–∞—Å—á–µ—Ç–∞?",
                "–° —á–µ–º –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å –≤ —Ä–∞—Å—á–µ—Ç–∞—Ö? –ö–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ —É–∂–µ —Å–º–æ—Ç—Ä–µ–ª?",
                "–ö–∞–∫ –¥—É–º–∞–µ—à—å –ø–æ–¥–æ–π—Ç–∏ –∫ —Ä–∞—Å—á–µ—Ç—É? –ù—É–∂–µ–Ω —Å–æ–≤–µ—Ç –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –∑–∞–ø—Ä–æ—Å–∞?",
                "–ß—Ç–æ –∏–º–µ–Ω–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏? –î–∞–Ω–Ω—ã–µ, –ª–æ–≥–∏–∫–∞ –∏–ª–∏ —Å—Ä–æ–∫–∏?"
            ]
            return random.choice(questions)
        
        elif any(word in message_lower for word in ["—Å—Ç–∞—Ç—É—Å", "—Ä–∞—Å—Ö–æ–∂–¥–µ–Ω"]):
            return "–ü—Ä–∏ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è—Ö —Å—Ç–∞—Ç—É—Å–æ–≤ –¥–∞–Ω–Ω—ã–µ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –≤—Å–µ–≥–¥–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã. –£ –Ω–∞—Å success/failed, —É PARTNER_A - COMPLETED/DECLINED, —É PARTNER_B - SUCCESS/FAILED. –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å—ã —Ä–∞–∑–Ω—ã–µ - –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞—à–∏ –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ DBA."
        
        elif any(word in message_lower for word in ["sql", "–∑–∞–ø—Ä–æ—Å", "—Ç–∞–±–ª–∏—Ü"]):
            return "–õ—É—á—à–µ –ø–æ–ø—Ä–æ–±—É–π —Å–∞–º –Ω–∞–ø–∏—Å–∞—Ç—å –∑–∞–ø—Ä–æ—Å, –∞ —è –ø–æ–º–æ–≥—É –µ–≥–æ —É–ª—É—á—à–∏—Ç—å. –ù–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞—á–Ω–∏ —Å SELECT * FROM processing_operations WHERE status='success'. –ü–æ–∫–∞–∂–∏ —á—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å."
        
        else:
            return "–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä–µ–º—Å—è –ø–æ–¥—Ä–æ–±–Ω–µ–µ. –ß—Ç–æ –∏–º–µ–Ω–Ω–æ —Ç—ã –ø—ã—Ç–∞–µ—à—å—Å—è —Å–¥–µ–ª–∞—Ç—å –∏ —á—Ç–æ —É–∂–µ –ø—Ä–æ–±–æ–≤–∞–ª?"
    
    elif character_key == "maxim":
        if any(word in message_lower for word in ["–æ–ø–µ—Ä–∞—Ü", "—É—Å–ø–µ—à–Ω", "–≤—ã—Ä—É—á–∫", "–¥–æ—Ö–æ–¥"]):
            return "–ù—É–∂–Ω–∞ –æ–±—â–∞—è –≤—ã—Ä—É—á–∫–∞ –∑–∞ –≤—á–µ—Ä–∞ –ø–æ —É—Å–ø–µ—à–Ω—ã–º –æ–ø–µ—Ä–∞—Ü–∏—è–º. ASAP –∫ 11:00 –¥–ª—è –≤—Å—Ç—Ä–µ—á–∏ —Å –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–º–∏. –ó–∞ –¥–µ—Ç–∞–ª—è–º–∏ –ø–æ –¥–∞–Ω–Ω—ã–º - –∫ –ê–ª–∏—Å–µ."
        
        elif any(word in message_lower for word in ["—Å—Ä–æ–∫", "–∫–æ–≥–¥–∞", "–≤—Ä–µ–º"]):
            return "–ù—É–∂–Ω–æ –∫ 11:00 –∫ –≤—Å—Ç—Ä–µ—á–µ —Å –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞–º–∏. ASAP! –ï—Å–ª–∏ –Ω–µ —É—Å–ø–µ–≤–∞–µ—à—å - —Å–∫–∞–∂–∏ –∑–∞—Ä–∞–Ω–µ–µ."
        
        else:
            return "–ó–∞–π–¥–∏ –∫ –ê–ª–∏—Å–µ –∑–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º–∏ –¥–µ—Ç–∞–ª—è–º–∏. –ú–Ω–µ –Ω—É–∂–Ω—ã –≥–æ—Ç–æ–≤—ã–µ —Ü–∏—Ñ—Ä—ã –¥–ª—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏."
    
    elif character_key == "dba_team":
        if any(word in message_lower for word in ["update", "insert", "delete"]):
            if "where" in message_lower and any(word in message_lower for word in ["update", "insert"]):
                return "–í—ã–ø–æ–ª–Ω–µ–Ω–æ. –ù–µ –∑–∞–±—É–¥—å –ø—Ä–æ –±—ç–∫–∞–ø—ã –¥–∞–Ω–Ω—ã—Ö –µ—Å–ª–∏ –ø—Ä–∞–≤–∏—à—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã."
            else:
                return "–ù–µ –º–æ–≥—É –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤ —Ç–∞–∫–æ–º –≤–∏–¥–µ. –§–æ—Ä–º–∞—Ç: UPDATE|INSERT —Ç–∞–±–ª–∏—Ü–∞ –£–°–õ–û–í–ò–Ø. –£—Ç–æ—á–Ω–∏ —É –ê–ª–∏—Å—ã."
        else:
            return "–ú—ã –≤—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–ø—Ä–æ—Å—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ: UPDATE|INSERT —Ç–∞–±–ª–∏—Ü–∞ –£–°–õ–û–í–ò–Ø. –î–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –æ–±—Ä–∞—Ç–∏—Å—å –∫ –ê–ª–∏—Å–µ."
    
    elif character_key == "partner_a":
        if any(word in message_lower for word in ["—Å—Ç–∞—Ç—É—Å", "—Ä–∞—Å—Ö–æ–∂–¥–µ–Ω"]):
            return "–î–æ–±—Ä—ã–π –¥–µ–Ω—å! –ù–∞—à–∏ —Å—Ç–∞—Ç—É—Å—ã: COMPLETED=—É—Å–ø–µ—Ö, DECLINED=–æ—Ç–∫–∞–∑, IN_PROGRESS=–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ. –ü—Ä–æ–≤–µ—Ä–∏–º —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –∏ –≤–µ—Ä–Ω–µ–º—Å—è —Å –æ—Ç–≤–µ—Ç–æ–º."
        else:
            return "–î–æ–±—Ä—ã–π –¥–µ–Ω—å! –ü–æ –≤–æ–ø—Ä–æ—Å–∞–º —Ä–µ–µ—Å—Ç—Ä–æ–≤ –∏ —Å—Ç–∞—Ç—É—Å–æ–≤ –æ–ø–µ—Ä–∞—Ü–∏–π - –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å. –ß–µ–º –º–æ–∂–µ–º –ø–æ–º–æ—á—å?"
    
    elif character_key == "partner_b":
        if any(word in message_lower for word in ["—Å—Ç–∞—Ç—É—Å", "—Ä–∞—Å—Ö–æ–∂–¥–µ–Ω"]):
            return "–î–æ–±—Ä—ã–π –¥–µ–Ω—å! –ù–∞—à–∏ —Å—Ç–∞—Ç—É—Å—ã: SUCCESS=—É—Å–ø–µ—Ö, FAILED=–æ—Ç–∫–∞–∑. –ü—Ä–æ–≤–µ—Ä–∏–º –¥–∞–Ω–Ω—ã–µ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–º –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é."
        else:
            return "–î–æ–±—Ä—ã–π –¥–µ–Ω—å! –ì–æ—Ç–æ–≤—ã –ø–æ–º–æ—á—å —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏ –ø–æ –æ–ø–µ—Ä–∞—Ü–∏—è–º –∏ —Ä–µ–µ—Å—Ç—Ä–∞–º."
    
    else:
        return "–î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä–µ–º—Å—è —Å —ç—Ç–∏–º –≤–æ–ø—Ä–æ—Å–æ–º. –†–∞—Å—Å–∫–∞–∂–∏ –ø–æ–¥—Ä–æ–±–Ω–µ–µ —á—Ç–æ –∏–º–µ–Ω–Ω–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å?"

CHARACTERS_RESPONSES = {
    "alice": {
        "name": "–ê–ª–∏—Å–∞ –ü–µ—Ç—Ä–æ–≤–∞",
        "get_response": lambda message: get_ai_response("alice", message)
    },
    "maxim": {
        "name": "–ú–∞–∫—Å–∏–º –í–æ–ª–∫–æ–≤", 
        "get_response": lambda message: get_ai_response("maxim", message)
    }
}

GROUP_CHATS = {
    "dba_team": {
        "name": "#dba-team",
        "icon": "üõ†Ô∏è",
        "description": "–ö–æ–º–∞–Ω–¥–∞ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö - –≤—ã–ø–æ–ª–Ω—è–µ–º SQL –∑–∞–ø—Ä–æ—Å—ã",
        "members": "3 —É—á–∞—Å—Ç–Ω–∏–∫–∞",
        "get_response": lambda message: get_ai_response("dba_team", message)
    },
    "partner_a": {
        "name": "#partner_a_operations_chat",
        "icon": "ü§ù",
        "description": "–û–ø–µ—Ä–∞—Ü–∏–∏ —Å –ü–∞—Ä—Ç–Ω–µ—Ä–æ–º –ê - –≤–æ–ø—Ä–æ—Å—ã –ø–æ —Ä–µ–µ—Å—Ç—Ä–∞–º –∏ –∫–æ–º–∏—Å—Å–∏—è–º", 
        "members": "–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ü–∞—Ä—Ç–Ω–µ—Ä –ê + –Ω–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞",
        "get_response": lambda message: get_ai_response("partner_a", message)
    },
    "partner_b": {
        "name": "#partner_b_operations_chat", 
        "icon": "ü§ù",
        "description": "–û–ø–µ—Ä–∞—Ü–∏–∏ —Å –ü–∞—Ä—Ç–Ω–µ—Ä–æ–º –ë - —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ —Ä–µ–µ—Å—Ç—Ä–æ–≤ –∏ —Å—Ç–∞—Ç—É—Å–æ–≤",
        "members": "–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ü–∞—Ä—Ç–Ω–µ—Ä –ë + –Ω–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞",
        "get_response": lambda message: get_ai_response("partner_b", message)
    }
}
